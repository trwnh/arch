#!/bin/bash
## after chrooting, run this

ln -sf /usr/share/zoneinfo/America/Chicago /etc/localtime
hwclock --systohc
echo "Set a root password."
passwd
# (set root password)
USER=trwnh
useradd -m -g users -s /bin/bash $USER
usermod -aG wheel,ftp,http $USER
echo "Created user $USER."
passwd $USER
# (set user password)
sed -i '/#\s%wheel\sALL=(ALL)\sALL/s/^#//g' /etc/sudoers
echo "EDITOR=nano" > etc/environment
HOSTNAME=ux301
echo "$HOSTNAME" > /etc/hostname
echo "
127.0.0.1 localhost
::1 localhost
127.0.1.1 $HOSTNAME.localdomain $HOSTNAME
" > /etc/hosts
bootctl install
echo "
title Arch Linux
linux /vmlinuz-linux
initrd /intel-ucode.img
initrd /initramfs-linux.img
options root=LABEL=Arch rw
" >> /boot/loader/entries/arch.conf
echo "
default arch
timeout 0
editor yes
" >> /boot/loader/loader.conf
systemctl enable NetworkManager
systemctl enable systemd-timesyncd
sed -i '/#Color/s/^#//g' /etc/pacman.conf
echo "Configuration complete."
echo "You can now delete this script, exit chroot, unmount, and reboot."
