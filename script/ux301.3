#!/bin/bash

## post
# login as trwnh

if [ "$(which yay)" != "/usr/bin/yay" ]
then
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -sic
yay --nodiffmenu --save
cd ..
sudo rm -r yay
echo "Installed yay."
else
echo "yay already installed."
fi

PACKAGES="
# ====== Fonts ======
# Arabic
ttf-amiri
ttf-arabeyes-fonts
ttf-qurancomplex-fonts
ttf-sil-lateef
ttf-sil-scheherazade
# Google
ttf-droid
ttf-roboto
ttf-roboto-slab
ttf-roboto-mono
noto-fonts
noto-fonts-emoji-blob
noto-fonts-extra
noto-fonts-cjk
# etc
#otf-fira-code
otf-nerd-fonts-fira-code
otf-fira-sans
otf-fira-mono
ttf-inconsolata
adobe-source-code-pro-fonts
adobe-source-sans-pro-fonts
adobe-source-serif-pro-fonts

# ====== Theming ======
materia-gtk-theme
materia-kde
faenza-icon-theme

# ====== Apps ======

# === Necessary ===
enpass-bin
firefox-developer-edition
# epiphany
quassel-client
dino
# tootle fractal # extra social/etc apps
# geary evolution thunderbird-nightly # idk which email to use
qbittorrent
# feedreader liferea # if i ever decide to stop using inoreader

# === Editors / IDEs ===
brackets
code
pantheon-code
gedit
# notepadqq

# === Creative ===
gimp # TODO: explore aur for scripts and plugins
krita
inkscape
# scribus
blender
# openscad
# darktable rawtherapee nufraw # digikam
obs-studio
# kdenlive cin openshot pitivi shotcut
audacity 
# jack2 ardour rosegarden # lmms non-daw qtractor

# === Viewers ===
mpv
youtube-dl
# baka-mplayer mpc-qt 
gpmdp
# deadbeef deepin-music lollypop musique museeks-bin gnome-music pantheon-music elisa 
# okular zathura
# shotwell showfoto # digikam
# yacreader
# pantheon-camera cheese

# === Office ===
libreoffice-fresh
texlive-most
# lyx
texmaker

# === Utility ===
gnome-disk-utility
pacmanlogviewer
# network-manager-applet-indicator
"

yay -S --noconfirm --needed $PACKAGES
echo "Apps and fonts already installed."

## pick a de/wm
echo "Install [xfce, deepin, sway]: " # TODO: support sway fallbacks of xfce/deepin -- xfsway, ddesway
read DESKTOP

case $DESKTOP in
xfce)
  yay -S --noconfirm xorg-server xfce4 xfce4-goodies compton plank xmousepasteblock-git
  curl https://raw.githubusercontent.com/trwnh/arch/master/config/compton.conf -o ~/.config/compton.conf
  echo "
export XDG_SESSION_TYPE=X11
exec xmousepasteblock
exec startxfce4
  " > ~/.xinitrc
  echo "startx" >> ~/.bashrc
;;
deepin)
  yay -S --noconfirm xorg-server deepin deepin-extra
  echo "
export XDG_SESSION_TYPE=X11
exec startdde
  " > ~/.xinitrc
  echo "startx" >> ~/.bashrc
;;
sway)
  yay -S --noconfirm sway wayland xorg-server-xwayland qt5-wayland xfce4-terminal \
    light playerctl pamixer mako ruby-fusuma slurp grim waybar imv rofi rofi-dmenu \
    thunar-extended thunar-volman thunar-archive-plugin thunar-vcs-plugin gvfs \
    powertop
  mkdir ~/.config/sway
  curl https://raw.githubusercontent.com/trwnh/arch/master/config/sway -o ~/.config/sway/config
  curl https://raw.githubusercontent.com/trwnh/arch/master/config/swaystatus.sh -o ~/.config/sway/status.sh
  curl https://wallpapers.wallhaven.cc/wallpapers/full/wallhaven-734403.jpg -o ~/.config/sway/wallpaper.jpg
  sudo chmod +x ~/.config/sway/status.sh
  mkdir ~/.config/fusuma
  echo \
"
interval:
  pinch: 0.1
" \
  > ~/.config/fusuma/config.yml
  echo "if [[ -z "'$'"DISPLAY ]] && [[ "'$'"(tty) = /dev/tty1 ]]; then exec sway; fi" >> ~/.bashrc
;;
# xfsway)
# yay -S xfce4-pulseaudio-plugin
# also need to replace thunar-extended with thunar if you want a desktop; use nautilus instead
esac
